<!DOCTYPE html>
<html>

<head>
  <script src="js/script.js"></script>
  <!--<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.3/jquery.min.js"></script>-->
  <script src="https://code.jquery.com/jquery-3.6.3.js" integrity="sha256-nQLuAZGRRcILA+6dMBOvcRh5Pe310sBpanc6+QBmyVM="
    crossorigin="anonymous"></script>
  <style>
    body {
      font-family: 'Gill Sans', 'Gill Sans MT', Calibri, 'Trebuchet MS', sans-serif;
      padding: 2%;
    }
  </style>
  <title>Bar Chart Maker</title>
</head>

<body>
  <header>
    <h1>Bar Chart Generator</h1>
  </header>

  <p class="chart">

  </p>

  <script>


    var data = [1, 2, 3];

    var options = {
      //Title//
      titleName: "Title",
      titleFontSize: "40px",
      titleFontColour: "black",
      //Bar//
      barColour: "orange",
      labelColour: "green",
      barSpacing: "20%",
      //Axes//
      yTitle: "Units",
      xTitle: "X-Axis",
      //Labels//
      labels: ["a", "b", "c",],
      //Value Position inside bar
      valuePos: "0%"
    };

    var element = ".chart";

    function drawBarChart(data, options, element) {

      //Chart type
      if (typeof data[0] === 'number') {
        options.chartType = "Single";
      } else if (typeof data[0] === 'object') {
        options.chartType = "Stacked";
      } else {
        options.chartType = "Invalid Data";
        alert("Invalid data");
      }

      ///Rendering////
      /////Y-Axis
      var yTicks = function (data) {
        var yTicks = ['0_'];
        var ticks = 0;

        //MaxValue
        var maxValue = 0;
        if (options.chartType === 'Single') {
          maxValue = Math.max.apply(null, data);
        } else if (options.chartType === 'Stacked') {
          for (i = 0; i < data.length; i++) {
            for (j = 0; j < data[i].length; j++) {
              if (data[i][j] > maxValue) {
                maxValue = data[i][j];
              }
            }
          }
        } options.maxValue = maxValue;

        ///Y Axis Ticks - 5 ticks
        for (i = 0; i < 5; i++) {
          ticks += Math.ceil(0.20 * options.maxValue);
          yTicks.unshift((ticks + "-<br><br><br><br>"));
        }
        yTicks = yTicks.join("");
        options.maxYValue = ticks;
        return (yTicks);
      };

      //X-Axis
      var xAxisCssGrid = function (data) {
        var xAxisHtml = "";
        var xAxisCount = 0;
        if (options.chartType === 'Single') {
          for (i = 0; i < data.length; i++) {
            xAxisCount++;
            xAxisHtml += "auto ";
          }
        } else if (options.chartType === 'Stacked') {
          for (i = 0; i < data.length; i++) {
            for (j = 0; j < data[i].length; j++) {
              xAxisCount++;
              xAxisHtml += "auto ";
            }
          }
        }
        options.xCount = xAxisCount;
        return xAxisHtml;
      };

      // JQUERY add bar chart to element provided
      var barChart = $(element).append("<div></div>").addClass("barChart");

      //title
      var title = $(".barChart").append(`<div>${options.titleName}</div>`).addClass("title")

      // Y-Axis elements
      var yAxis = $(".barChart").append("<div></div>").addClass("yAxis");

      var yTitle = $(".yAxis").append(`<div>${options.yTitle}</div>`).addClass("yTitle");

      var yTicks = $(".yAxis").append(`<div>${yTicks(data)}</div>`).addClass("yTicks");




      var xAxis = ""
      var chartArea = ""
      var chartText = `<div class="barChart">

<div class="title">${options.titleName}</div>


<div class="yAxis">

  <div class="yTitle">${options.yTitle}</div>

  <div class="yTicks">${yTicks(data)}
  </div>

</div>

<div class="xAxis">
  <div class="label1">a</div>
  <div class="label2">b</div>
  <div class="label3">c</div>
  <div class="xTitle">${options.xTitle}</div>
</div>



<div class="chartArea">

  <div class="bar1">
    <p class="value1">
      Value1
    </p>
  </div>
  <div class="bar2">
    <p class="value2">
      Value2
    </p>
  </div>
  <div class="bar3">
    <p class="value3">
      Value3
    </p>
  </div>
</div>
</div>
`;

      //CSS styling

      $('.barChart').css({
        'display': 'grid',
        'grid-template-columns': 'auto auto auto auto auto',
        'grid-gap': '0px',
        'padding': '5%',
        'background-color': 'white',
        'height': '80%',
        'width': '80%',
        'font-family': 'inherit'
      });

      $('.title').css({
        'grid-area': '1/1/span 1/span 11',
        'text-align': 'center',
        'font-size': `${options.titleFontSize}`,
        'color': `${options.titleFontColour}`
      });

      $('.yAxis').css({
        'position': 'relative',
        'grid-area': '2/1/span 10 /span 1',
        'text-align': 'right'
      });

      $('.yTitle').css({
        'text-align': 'center'
      });

      $('.yTicks').css({
        'position': 'relative',
        'right': '0',
        'bottom': '0%'
      });

      $('.xAxis').css({
        "position": "relative",
        "grid-area": "12/2/span 2 /span 10",
        "text-align": "center",
        "display": "grid",
        "grid-template-columns": `${options.xAxisHtml}`,
        "grid-template-rows": "auto auto",
        "grid-gap": `${options.barSpacing}`,
        "padding-left": "10%",
        "padding-right": "10%"
      })

      $('.xTitle').css({
        "background-color": "white",
        "grid-area": "2/1/span 2/span 3",
        "position": "center",
      })

      $('.chartArea').css({
        "position": "relative",
        "grid-area": "2/2/span 10/span 10",
        "grid-gap": `${options.barSpacing}`,
        "padding-left": "10%",
        "padding-right": "10%",
        "background-color": "whitesmoke",
        "border-style": "none none groove groove",
        "display": "grid",
        "grid-template-columns": `${options.xAxisHtml}`
      })


      $('style').append('This is paragraph.')
      return chartText2;
    }

    $(document).ready(drawBarChart(data, options, element));

  </script>